# v1.4.3 문서 동기화 계획 문서

> **Summary**: bkit v1.4.3 코드 구현과 문서 간의 Gap 분석 및 동기화 계획
>
> **Project**: bkit-claude-code
> **Version**: 1.4.3
> **Author**: Claude
> **Date**: 2026-01-26
> **Status**: In Progress

---

## 1. Overview

### 1.1 Purpose

bkit v1.4.3 버전의 코드 구현이 완료되었으나, 관련 문서들이 최신 구현 상태와 동기화되지 않았습니다. 이 계획은 모든 문서를 코드 구현과 일치하도록 업데이트하는 것을 목표로 합니다.

### 1.2 Background

**v1.4.3 주요 변경사항 (CHANGELOG.md 기준):**

| 변경 유형 | 내용 |
|----------|------|
| **FR-1.1** | Hook Context XML Wrapping Compatibility - `xmlSafeOutput()` 함수 추가 |
| **FR-1.2** | engines.gemini-cli 버전 `>=1.0.0` → `>=0.25.0` 변경 |
| **적용 위치** | `lib/common.js`, `hooks/session-start.js`, `gemini-extension.json` |

### 1.3 v1.4.2 → v1.4.3 변경 요약

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    v1.4.3 Changes Summary                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  [lib/common.js]                                                         │
│  ├─ xmlSafeOutput() 함수 추가 (line 658-668)                             │
│  ├─ outputAllow()에 xmlSafeOutput() 적용 (line 566)                      │
│  └─ outputBlock()에 xmlSafeOutput() 적용 (line 628)                      │
│                                                                          │
│  [hooks/session-start.js]                                                │
│  ├─ 버전 v1.4.3 업데이트 (line 3, 526)                                   │
│  ├─ xmlSafeOutput import 추가 (line 47-48)                               │
│  └─ 동적 콘텐츠에 xmlSafeOutput() 적용 (line 489-491)                    │
│                                                                          │
│  [gemini-extension.json]                                                 │
│  ├─ version: "1.4.3"                                                     │
│  └─ engines.gemini-cli: ">=0.25.0"                                       │
│                                                                          │
│  [Manifest Files]                                                        │
│  ├─ .claude-plugin/plugin.json: version "1.4.3"                          │
│  ├─ .claude-plugin/marketplace.json: version "1.4.3" (2곳)               │
│  └─ bkit.config.json: version "1.4.3"                                    │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 2. Scope

### 2.1 In Scope - 동기화 대상 문서

#### 2.1.1 최상위 문서 (Root)

| 문서 | 동기화 필요 항목 | 우선순위 |
|------|-----------------|:--------:|
| **README.md** | ✅ Version badge 1.4.3 (완료) | - |
| **CHANGELOG.md** | ✅ [1.4.3] 섹션 (완료) | - |
| **CUSTOMIZATION-GUIDE.md** | v1.4.2 → v1.4.3 버전 참조 업데이트 | High |
| **AI-NATIVE-DEVELOPMENT.md** | v1.4.2 참조 확인 및 업데이트 | Medium |

#### 2.1.2 bkit-system 문서

| 문서 | 동기화 필요 항목 | 우선순위 |
|------|-----------------|:--------:|
| **bkit-system/README.md** | v1.4.2 → v1.4.3 헤더 업데이트, xmlSafeOutput 추가 | High |
| **bkit-system/philosophy/context-engineering.md** | v1.4.3 변경사항 반영 | High |
| **bkit-system/components/hooks/_hooks-overview.md** | v1.4.3 변경사항 추가 | High |
| **bkit-system/components/scripts/_scripts-overview.md** | xmlSafeOutput() 함수 추가 | High |
| **bkit-system/testing/test-checklist.md** | v1.4.3 테스트 케이스 추가 | Medium |

#### 2.1.3 lib/common.js 문서 동기화

| 항목 | 현재 상태 | 필요 조치 |
|------|----------|----------|
| 파일 헤더 주석 | v1.4.0 | v1.4.3으로 업데이트, xmlSafeOutput 설명 추가 |
| 함수 카운트 | 86+ functions | xmlSafeOutput 추가로 87+ functions |
| module.exports | xmlSafeOutput 포함됨 | 문서에 반영 |

### 2.2 Out of Scope

- 코드 구현 변경 (이미 완료됨)
- 새로운 기능 추가
- docs/archive/ 내 완료된 문서 수정

---

## 3. Requirements

### 3.1 Functional Requirements

| ID | 요구사항 | 우선순위 | 상태 |
|----|----------|:--------:|:----:|
| FR-01 | CUSTOMIZATION-GUIDE.md v1.4.2 참조를 v1.4.3으로 업데이트 | High | Pending |
| FR-02 | bkit-system/README.md 버전 헤더 v1.4.3 추가 | High | Pending |
| FR-03 | bkit-system/philosophy/context-engineering.md v1.4.3 변경사항 추가 | High | Pending |
| FR-04 | bkit-system/components/hooks/_hooks-overview.md v1.4.3 정보 추가 | High | Pending |
| FR-05 | bkit-system/components/scripts/_scripts-overview.md xmlSafeOutput 추가 | High | Pending |
| FR-06 | lib/common.js 파일 헤더 주석 v1.4.3 업데이트 | High | Pending |
| FR-07 | AI-NATIVE-DEVELOPMENT.md v1.4.2 참조 확인 | Medium | Pending |
| FR-08 | bkit-system/testing/test-checklist.md v1.4.3 테스트 추가 | Medium | Pending |

### 3.2 Non-Functional Requirements

| 카테고리 | 기준 | 검증 방법 |
|----------|------|----------|
| 일관성 | 모든 버전 참조가 1.4.3으로 통일 | Grep 검색 |
| 정확성 | 문서 내용이 코드 구현과 100% 일치 | Gap Analysis |
| 완전성 | xmlSafeOutput 관련 모든 문서에 반영 | 체크리스트 |

---

## 4. 상세 분석 결과

### 4.1 lib/common.js 버전 헤더 분석

**현재 상태 (line 1-15):**
```javascript
/**
 * bkit Common Library (v1.4.0)  // ❌ v1.4.3으로 업데이트 필요
 * ...
 * v1.4.0 Changes:
 * - Added Debug Logging system
 * - Added PDCA Status Management
 * - Added extractFeatureFromContext
 */
```

**필요 조치:**
- 버전을 v1.4.3으로 업데이트
- v1.4.3 변경사항 추가:
  - `xmlSafeOutput()` 함수 추가 (FR-1.1)
  - Gemini CLI v0.27+ XML 래핑 호환성

### 4.2 CUSTOMIZATION-GUIDE.md 분석

**현재 v1.4.2 참조 위치:**
- Component Inventory (v1.4.2) 테이블
- Context Engineering Architecture (v1.4.2) 다이어그램
- Component Architecture (v1.4.2) 다이어그램
- lib/*.js (6 modules, 86+ functions) v1.4.2

**필요 조치:**
- v1.4.2 → v1.4.3 버전 참조 업데이트
- xmlSafeOutput() 함수 설명 추가 (필요 시)

### 4.3 bkit-system/README.md 분석

**현재 상태:**
```markdown
> **v1.4.2**: Context Engineering modules + Task Management integration
```

**필요 조치:**
- v1.4.3 헤더 추가:
  - xmlSafeOutput() Gemini CLI 호환성
  - engines.gemini-cli 버전 변경

### 4.4 bkit-system/philosophy/context-engineering.md 분석

**현재 상태:**
```markdown
> **v1.4.2**: Complete Context Engineering implementation with 8 FRs
```

**필요 조치:**
- v1.4.3 변경사항 헤더 추가
- Library Modules 테이블에 xmlSafeOutput 반영

### 4.5 bkit-system/components/scripts/_scripts-overview.md 분석

**현재 상태:**
- 28 Node.js Scripts 언급 (정확)
- lib/common.js 86+ functions 언급

**필요 조치:**
- xmlSafeOutput() 함수 설명 추가
- 버전 헤더 v1.4.3 추가

### 4.6 bkit-system/components/hooks/_hooks-overview.md 분석

**현재 상태:**
```markdown
> **v1.4.2**: Added UserPromptSubmit (FR-04) and PreCompact (FR-07)
```

**필요 조치:**
- v1.4.3 변경사항 추가 (Gemini CLI 호환성)

---

## 5. 구현 계획

### 5.1 Phase 1: High Priority 문서 (FR-01 ~ FR-06)

```
Step 1: lib/common.js 헤더 업데이트
        └─ 버전 v1.4.0 → v1.4.3
        └─ v1.4.3 Changes 섹션 추가

Step 2: CUSTOMIZATION-GUIDE.md 업데이트
        └─ v1.4.2 → v1.4.3 참조 변경 (4곳)

Step 3: bkit-system/README.md 업데이트
        └─ v1.4.3 헤더 라인 추가

Step 4: bkit-system/philosophy/context-engineering.md 업데이트
        └─ v1.4.3 변경사항 헤더 추가
        └─ Library Modules 테이블 업데이트

Step 5: bkit-system/components/hooks/_hooks-overview.md 업데이트
        └─ v1.4.3 변경사항 추가

Step 6: bkit-system/components/scripts/_scripts-overview.md 업데이트
        └─ v1.4.3 헤더 추가
        └─ xmlSafeOutput() 함수 문서화
```

### 5.2 Phase 2: Medium Priority 문서 (FR-07 ~ FR-08)

```
Step 7: AI-NATIVE-DEVELOPMENT.md 확인
        └─ v1.4.2 참조 확인 및 필요 시 업데이트

Step 8: bkit-system/testing/test-checklist.md 업데이트
        └─ v1.4.3 테스트 케이스 추가
```

---

## 6. 검증 계획

### 6.1 버전 참조 일관성 검증

```bash
# v1.4.2 참조가 남아있는지 확인 (업데이트 대상)
grep -r "1\.4\.2" --include="*.md" bkit-system/
grep -r "v1\.4\.2" --include="*.md" bkit-system/

# v1.4.3 참조가 올바른지 확인
grep -r "1\.4\.3" --include="*.md" .
```

### 6.2 Gap Analysis 실행

동기화 완료 후 `/pdca-analyze` 실행하여 문서-코드 일치 검증

---

## 7. Success Criteria

### 7.1 Definition of Done

- [x] 모든 FR-01 ~ FR-08 구현 완료
- [ ] lib/common.js 헤더에 v1.4.3 변경사항 반영
- [ ] 모든 문서에서 버전 참조 v1.4.3으로 통일
- [ ] xmlSafeOutput() 함수가 관련 문서에 모두 반영
- [ ] Gap Analysis 통과 (≥90%)

### 7.2 Quality Criteria

- [ ] Grep 검색으로 v1.4.2 참조 0건 (docs/archive 제외)
- [ ] 모든 버전 참조가 1.4.3으로 통일
- [ ] 문서 간 일관성 유지

---

## 8. Risks and Mitigation

| 리스크 | 영향도 | 가능성 | 완화 방안 |
|--------|:------:|:------:|----------|
| 누락된 문서 발견 | Medium | Medium | Grep 검색으로 전수 조사 |
| 버전 참조 불일치 | Low | Low | 자동화된 검증 스크립트 사용 |

---

## 9. Next Steps

1. [ ] 이 Plan 문서 승인
2. [ ] Phase 1 (FR-01 ~ FR-06) 구현
3. [ ] Phase 2 (FR-07 ~ FR-08) 구현
4. [ ] Gap Analysis 실행 (`/pdca-analyze`)
5. [ ] Report 문서 작성 (`/pdca-report`)

---

## Version History

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 0.1 | 2026-01-26 | 초안 작성 | Claude |
