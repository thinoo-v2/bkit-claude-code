# v1.4.4 Comprehensive Enhancement Test Plan

> **Summary**: v1.4.4 구현 완료 후 모든 기능의 동작 검증을 위한 테스트 계획서
>
> **Project**: bkit Vibecoding Kit
> **Version**: 1.4.4
> **Author**: Claude Opus 4.5
> **Date**: 2026-01-27
> **Status**: Draft

---

## 1. Overview

### 1.1 Test Objective

v1.4.4-comprehensive-enhancement에서 구현된 12개 Functional Requirements(FR)의 동작을 Claude Code와 Gemini CLI 양 플랫폼에서 검증한다.

### 1.2 Test Scope

| Category | Items | Platform |
|----------|-------|----------|
| Skills-Agents 연결 | FR-01 ~ FR-04 | Claude Code, Gemini CLI |
| skill-orchestrator.js | FR-05 | Claude Code, Gemini CLI |
| Stop Hooks 자동화 | FR-06 ~ FR-07 | Claude Code, Gemini CLI |
| Templates | FR-08 ~ FR-10 | Claude Code, Gemini CLI |
| Level Phase Skip | FR-11 | Claude Code, Gemini CLI |
| Cleanup | FR-12 | 파일 시스템 확인 |

### 1.3 Related Documents

- [v1.4.4-comprehensive-enhancement.plan.md](./v1.4.4-comprehensive-enhancement.plan.md)
- [v1.4.4-comprehensive-enhancement.design.md](../../02-design/features/v1.4.4-comprehensive-enhancement.design.md)

---

## 2. Pre-Test Verification (구현 상태 확인)

### 2.1 Implementation Status Summary

| FR ID | Requirement | Implementation Status | Files |
|-------|-------------|:---------------------:|-------|
| FR-01 | pdca skill agents 연결 | ✅ 완료 | `skills/pdca/SKILL.md` |
| FR-02 | enterprise skill agents 연결 | ✅ 완료 | `skills/enterprise/SKILL.md` |
| FR-03 | phase-8-review skill agents 연결 | ✅ 완료 | `skills/phase-8-review/SKILL.md` |
| FR-04 | code-review skill 생성 | ✅ 완료 | `skills/code-review/SKILL.md` |
| FR-05 | skill-orchestrator.js multi-binding | ✅ 완료 | `lib/skill-orchestrator.js` |
| FR-06 | Stop Hooks 자동 트리거 | ✅ 완료 | `scripts/*-stop.js` |
| FR-07 | PDCA Phase 자동 Task 생성 | ✅ 완료 | `scripts/pdca-skill-stop.js`, `lib/common.js` |
| FR-08 | iteration-report.template.md | ✅ 존재 | `templates/iteration-report.template.md` |
| FR-09 | convention.template.md | ✅ 존재 | `templates/convention.template.md` |
| FR-10 | schema.template.md | ✅ 존재 | `templates/schema.template.md` |
| FR-11 | Level별 Phase Skip | ✅ 완료 | `lib/common.js` |
| FR-12 | commands/backup/ 삭제 | ✅ 완료 | 폴더 없음 확인 |

---

## 3. Test Cases by Functional Requirement

### 3.1 FR-01: pdca skill에 gap-detector, pdca-iterator, report-generator 연결

#### TC-01-01: pdca analyze → gap-detector Agent 호출

**Objective**: `/pdca analyze` 실행 시 `gap-detector` Agent가 정상 호출되는지 확인

**Preconditions**:
- 테스트용 feature (test-feature) 존재
- Plan 및 Design 문서 존재
- 구현 코드 존재

**Test Steps (Claude Code)**:
1. 터미널에서 `claude` 실행
2. `/pdca analyze test-feature` 입력
3. Agent 호출 로그 확인

**Expected Results**:
- [ ] `gap-detector` Agent가 호출됨
- [ ] Agent Stop Hook (`gap-detector-stop.js`) 실행됨
- [ ] Match Rate 계산 및 표시됨
- [ ] AskUserQuestion 프롬프트 표시됨

**Test Steps (Gemini CLI)**:
1. 터미널에서 `gemini` 실행
2. `/pdca analyze test-feature` 입력
3. Agent 호출 및 결과 확인

**Expected Results (Gemini)**:
- [ ] `gap-detector` Agent 호출됨
- [ ] Plain text 가이던스 출력됨
- [ ] Match Rate 계산됨

---

#### TC-01-02: pdca iterate → pdca-iterator Agent 호출

**Objective**: `/pdca iterate` 실행 시 `pdca-iterator` Agent가 정상 호출되는지 확인

**Preconditions**:
- Gap Analysis 완료됨 (matchRate < 90%)
- 개선이 필요한 코드 존재

**Test Steps (Claude Code)**:
1. `/pdca iterate test-feature` 입력
2. Agent 호출 로그 확인
3. 코드 수정 동작 확인

**Expected Results**:
- [ ] `pdca-iterator` Agent가 호출됨
- [ ] 코드 수정 제안/실행됨
- [ ] `iterator-stop.js` Hook 실행됨
- [ ] 자동 재분석 트리거 옵션 제공됨 (FR-06)

---

#### TC-01-03: pdca report → report-generator Agent 호출

**Objective**: `/pdca report` 실행 시 `report-generator` Agent가 정상 호출되는지 확인

**Preconditions**:
- matchRate >= 90% 달성됨
- PDCA 사이클 완료 상태

**Test Steps**:
1. `/pdca report test-feature` 입력
2. Agent 호출 확인
3. 보고서 생성 확인

**Expected Results**:
- [ ] `report-generator` Agent가 호출됨
- [ ] `docs/04-report/test-feature.report.md` 생성됨
- [ ] 보고서에 Plan, Design, Implementation, Analysis 통합됨

---

### 3.2 FR-02: enterprise skill에 enterprise-expert Agent 연결

#### TC-02-01: enterprise init → enterprise-expert Agent 호출

**Objective**: `/enterprise init` 실행 시 `enterprise-expert` Agent가 호출되는지 확인

**Test Steps**:
1. `/enterprise init test-enterprise` 입력
2. Agent 호출 확인
3. 프로젝트 초기화 가이드 제공 확인

**Expected Results**:
- [ ] `enterprise-expert` Agent가 호출됨 (agents.default)
- [ ] Enterprise 레벨 프로젝트 구조 가이드 제공됨
- [ ] Monorepo, K8s, Terraform 관련 안내 제공됨

---

#### TC-02-02: enterprise infra → infra-architect Agent 호출

**Objective**: `/enterprise infra` 실행 시 `infra-architect` Agent가 호출되는지 확인

**Test Steps**:
1. `/enterprise infra` 입력
2. Agent 호출 확인

**Expected Results**:
- [ ] `infra-architect` Agent가 호출됨 (agents.infra)
- [ ] AWS, Kubernetes, Terraform 가이드 제공됨

---

### 3.3 FR-03: phase-8-review skill에 design-validator, code-analyzer 연결

#### TC-03-01: phase-8-review validate → design-validator Agent 호출

**Objective**: Phase 8에서 설계 검증 시 `design-validator` Agent가 호출되는지 확인

**Test Steps**:
1. Phase 8 단계 진입
2. 설계 검증 요청 (`validate design`)
3. Agent 호출 확인

**Expected Results**:
- [ ] `design-validator` Agent가 호출됨 (agents.validate)
- [ ] 설계 문서 완전성 검사됨
- [ ] 누락 항목 리포트됨

---

#### TC-03-02: phase-8-review default → code-analyzer Agent 호출

**Objective**: Phase 8 기본 실행 시 `code-analyzer` Agent가 호출되는지 확인

**Test Steps**:
1. Phase 8 단계 진입 (기본 실행)
2. Agent 호출 확인

**Expected Results**:
- [ ] `code-analyzer` Agent가 호출됨 (agents.default)
- [ ] 코드 품질, 보안, 성능 분석됨

---

### 3.4 FR-04: code-review skill 생성 및 code-analyzer 연결

#### TC-04-01: /code-review 실행 테스트

**Objective**: `/code-review` skill이 정상 동작하고 `code-analyzer` Agent가 호출되는지 확인

**Test Steps (Claude Code)**:
1. `/code-review src/lib/` 입력
2. Agent 호출 확인
3. 코드 리뷰 결과 확인

**Expected Results**:
- [ ] `code-review` skill이 인식됨
- [ ] `code-analyzer` Agent가 호출됨
- [ ] 코드 품질 분석 결과 표시됨
- [ ] Confidence-based 필터링 적용됨

**Test Steps (Gemini CLI)**:
1. `/code-review src/lib/` 입력
2. 결과 확인

**Expected Results (Gemini)**:
- [ ] skill 인식 및 실행됨
- [ ] 분석 결과 표시됨

---

### 3.5 FR-05: skill-orchestrator.js agents multi-binding 지원

#### TC-05-01: parseAgentsField 함수 테스트 - agents 객체

**Objective**: `agents:` 객체 필드가 올바르게 파싱되는지 확인

**Test Method**: Node.js 직접 실행
```javascript
const { parseAgentsField } = require('./lib/skill-orchestrator.js');

// Test case 1: agents object
const config1 = {
  agents: {
    analyze: 'gap-detector',
    iterate: 'pdca-iterator',
    default: 'report-generator'
  }
};
const result1 = parseAgentsField(config1);
console.log(result1);
// Expected: { analyze: 'gap-detector', iterate: 'pdca-iterator', default: 'report-generator', _isMultiBinding: true }
```

**Expected Results**:
- [ ] `_isMultiBinding: true` 반환됨
- [ ] 모든 action-agent 매핑 포함됨

---

#### TC-05-02: parseAgentsField 함수 테스트 - agent 단일 값

**Objective**: `agent:` 단일 값 필드가 올바르게 파싱되는지 확인

**Test Method**:
```javascript
// Test case 2: single agent
const config2 = { agent: 'code-analyzer' };
const result2 = parseAgentsField(config2);
console.log(result2);
// Expected: { default: 'code-analyzer', _isMultiBinding: false }
```

**Expected Results**:
- [ ] `_isMultiBinding: false` 반환됨
- [ ] `default` 키에 agent 이름 설정됨

---

#### TC-05-03: getAgentForAction 함수 테스트

**Objective**: action별 올바른 Agent가 반환되는지 확인

**Test Method**:
```javascript
const { getAgentForAction } = require('./lib/skill-orchestrator.js');

// pdca skill 테스트
console.log(getAgentForAction('pdca', 'analyze'));  // Expected: 'gap-detector'
console.log(getAgentForAction('pdca', 'iterate'));  // Expected: 'pdca-iterator'
console.log(getAgentForAction('pdca', 'report'));   // Expected: 'report-generator'
console.log(getAgentForAction('pdca', 'unknown'));  // Expected: null (default is null)

// enterprise skill 테스트
console.log(getAgentForAction('enterprise', 'init'));   // Expected: 'enterprise-expert'
console.log(getAgentForAction('enterprise', 'infra'));  // Expected: 'infra-architect'
```

**Expected Results**:
- [ ] 각 action에 맞는 Agent 반환됨
- [ ] 정의되지 않은 action은 default 또는 null 반환됨

---

#### TC-05-04: getLinkedAgents 함수 테스트

**Objective**: skill에 연결된 모든 Agent 목록이 반환되는지 확인

**Test Method**:
```javascript
const { getLinkedAgents } = require('./lib/skill-orchestrator.js');

const agents = getLinkedAgents('pdca');
console.log(agents);
// Expected: ['gap-detector', 'pdca-iterator', 'report-generator'] (중복 제거)
```

**Expected Results**:
- [ ] 고유한 Agent 이름 배열 반환됨
- [ ] `_isMultiBinding` 키 제외됨

---

#### TC-05-05: isMultiBindingSkill 함수 테스트

**Objective**: skill이 multi-binding을 사용하는지 올바르게 판단되는지 확인

**Test Method**:
```javascript
const { isMultiBindingSkill } = require('./lib/skill-orchestrator.js');

console.log(isMultiBindingSkill('pdca'));        // Expected: true
console.log(isMultiBindingSkill('code-review')); // Expected: false
console.log(isMultiBindingSkill('enterprise'));  // Expected: true
```

**Expected Results**:
- [ ] agents: 사용 skill → true
- [ ] agent: 사용 skill → false

---

### 3.6 FR-06: Stop Hooks 자동 다음 단계 트리거

#### TC-06-01: gap-detector-stop.js 자동 Task 생성 (matchRate < 90%)

**Objective**: Match Rate가 90% 미만일 때 [Act] Task가 자동 생성되는지 확인

**Preconditions**:
- Gap Analysis 실행됨
- matchRate = 75% (예시)

**Test Steps**:
1. `/pdca analyze test-feature` 실행 (matchRate < 90%)
2. Hook 출력 확인
3. Task 생성 확인

**Expected Results**:
- [ ] `[Act-1] test-feature` Task 자동 생성됨
- [ ] Task에 `blockedBy: [Check] test-feature` 설정됨
- [ ] AskUserQuestion에 "자동 개선" 옵션 표시됨

---

#### TC-06-02: gap-detector-stop.js 자동 Task 생성 (matchRate >= 90%)

**Objective**: Match Rate가 90% 이상일 때 [Report] Task가 자동 생성되는지 확인

**Preconditions**:
- Gap Analysis 실행됨
- matchRate = 95% (예시)

**Test Steps**:
1. `/pdca analyze test-feature` 실행 (matchRate >= 90%)
2. Hook 출력 확인
3. Task 생성 확인

**Expected Results**:
- [ ] `[Report] test-feature` Task 자동 생성됨
- [ ] Task에 `blockedBy: [Check] test-feature` 설정됨
- [ ] AskUserQuestion에 "보고서 생성" 옵션 표시됨

---

#### TC-06-03: iterator-stop.js 자동 재분석 트리거

**Objective**: 개선 완료 후 자동 재분석 트리거 정보가 출력되는지 확인

**Preconditions**:
- `/pdca iterate` 실행 완료
- 코드 수정됨
- matchRate < 90%

**Test Steps**:
1. `/pdca iterate test-feature` 실행
2. Hook 출력 확인
3. `autoTrigger` 필드 확인

**Expected Results**:
- [ ] Hook 응답에 `autoTrigger.agent: 'gap-detector'` 포함됨
- [ ] `autoTrigger.skill: '/pdca analyze'` 포함됨
- [ ] AskUserQuestion에 "재분석" 옵션 표시됨

---

### 3.7 FR-07: PDCA Phase 자동 전환 Task 생성

#### TC-07-01: pdca-skill-stop.js PDCA 전환 맵 테스트

**Objective**: `PDCA_PHASE_TRANSITIONS` 맵이 올바르게 정의되었는지 확인

**Test Method**: 파일 검사
```javascript
// pdca-skill-stop.js 내 PDCA_PHASE_TRANSITIONS 확인
const transitions = {
  'plan': { next: 'design', skill: '/pdca design', ... },
  'design': { next: 'do', skill: null, ... },
  'do': { next: 'check', skill: '/pdca analyze', ... },
  'check': { conditions: [...] },  // 조건부 전환
  'act': { next: 'check', skill: '/pdca analyze', ... }
};
```

**Expected Results**:
- [ ] 5개 Phase 전환 정의됨
- [ ] check Phase는 조건부 전환 (matchRate 기반)
- [ ] 각 전환에 taskTemplate 포함됨

---

#### TC-07-02: determinePdcaTransition 함수 테스트 - 일반 전환

**Objective**: 일반 Phase 전환이 올바르게 결정되는지 확인

**Test Steps**:
1. plan → design 전환 테스트
2. design → do 전환 테스트
3. do → check 전환 테스트

**Expected Results**:
- [ ] `determinePdcaTransition('plan', {})` → `{ next: 'design', skill: '/pdca design', ... }`
- [ ] `determinePdcaTransition('design', {})` → `{ next: 'do', skill: null, ... }`
- [ ] `determinePdcaTransition('do', {})` → `{ next: 'check', skill: '/pdca analyze', ... }`

---

#### TC-07-03: determinePdcaTransition 함수 테스트 - 조건부 전환 (check)

**Objective**: check Phase의 조건부 전환이 올바르게 동작하는지 확인

**Test Steps**:
1. matchRate >= 90% 조건 테스트
2. matchRate < 90% 조건 테스트

**Expected Results**:
- [ ] `determinePdcaTransition('check', { matchRate: 95 })` → `{ next: 'report', ... }`
- [ ] `determinePdcaTransition('check', { matchRate: 75 })` → `{ next: 'act', ... }`

---

#### TC-07-04: PDCA Skill Stop Hook 통합 테스트

**Objective**: pdca skill 완료 시 다음 Phase Task가 자동 생성되는지 확인

**Test Steps (Claude Code)**:
1. `/pdca plan test-feature` 실행
2. Hook 완료 후 Task 확인
3. `/tasks` 명령으로 Task 목록 확인

**Expected Results**:
- [ ] `[Design] test-feature` Task 자동 생성됨
- [ ] Task에 `blockedBy` 설정됨
- [ ] `suggestedSkill: '/pdca design'` 정보 포함됨

---

### 3.8 FR-08: iteration-report.template.md 생성

#### TC-08-01: Template 존재 및 구조 확인

**Objective**: `iteration-report.template.md`가 존재하고 올바른 구조를 가지는지 확인

**Test Steps**:
1. 파일 존재 확인: `templates/iteration-report.template.md`
2. 내용 확인

**Expected Results**:
- [ ] 파일 존재함
- [ ] YAML frontmatter 포함 (template, version, description)
- [ ] Act 단계 반복 보고서 구조 포함
- [ ] 반복 횟수, matchRate 변화, 수정 내역 섹션 포함

---

### 3.9 FR-09: convention.template.md 생성

#### TC-09-01: Template 존재 및 구조 확인

**Objective**: `convention.template.md`가 존재하고 올바른 구조를 가지는지 확인

**Test Steps**:
1. 파일 존재 확인: `templates/convention.template.md`
2. 내용 확인

**Expected Results**:
- [ ] 파일 존재함
- [ ] Phase 2 코딩 컨벤션 구조 포함
- [ ] Naming rules, folder structure, import order 섹션 포함
- [ ] Environment variable conventions 섹션 포함

---

### 3.10 FR-10: schema.template.md 생성

#### TC-10-01: Template 존재 및 구조 확인

**Objective**: `schema.template.md`가 존재하고 올바른 구조를 가지는지 확인

**Test Steps**:
1. 파일 존재 확인: `templates/schema.template.md`
2. 내용 확인

**Expected Results**:
- [ ] 파일 존재함
- [ ] Phase 1 Schema/Terminology 구조 포함
- [ ] Terminology 정의 테이블 포함
- [ ] Data Schema (Entities, Relationships) 섹션 포함
- [ ] API Response Schema 섹션 포함

---

### 3.11 FR-11: Level별 Phase Skip 자동화

#### TC-11-01: LEVEL_PHASE_MAP 정의 확인

**Objective**: `LEVEL_PHASE_MAP`이 올바르게 정의되었는지 확인

**Test Method**:
```javascript
const { LEVEL_PHASE_MAP } = require('./lib/common.js');
console.log(LEVEL_PHASE_MAP);
// Expected:
// {
//   Starter: { required: [1, 2, 3, 6, 9], optional: [4, 5, 7, 8] },
//   Dynamic: { required: [1, 2, 3, 4, 5, 6, 7, 9], optional: [8] },
//   Enterprise: { required: [1, 2, 3, 4, 5, 6, 7, 8, 9], optional: [] }
// }
```

**Expected Results**:
- [ ] Starter: Phase 1, 2, 3, 6, 9 필수 (4, 5, 7, 8 선택)
- [ ] Dynamic: Phase 1-7, 9 필수 (8 선택)
- [ ] Enterprise: 모든 Phase 필수

---

#### TC-11-02: getNextPhaseForLevel 함수 테스트

**Objective**: Level에 따라 다음 Phase가 올바르게 결정되는지 확인

**Test Method**:
```javascript
const { getNextPhaseForLevel } = require('./lib/common.js');

// Starter level: Phase 3 → Phase 6 (4, 5 skip)
console.log(getNextPhaseForLevel(3, 'Starter'));  // Expected: 6

// Dynamic level: Phase 3 → Phase 4
console.log(getNextPhaseForLevel(3, 'Dynamic'));  // Expected: 4

// Enterprise level: Phase 3 → Phase 4
console.log(getNextPhaseForLevel(3, 'Enterprise'));  // Expected: 4
```

**Expected Results**:
- [ ] Starter: 3 → 6 (Phase 4, 5 skip)
- [ ] Dynamic: 3 → 4 (순차 진행)
- [ ] Enterprise: 3 → 4 (순차 진행)

---

#### TC-11-03: isPhaseApplicable 함수 테스트

**Objective**: 특정 Phase가 Level에 적용되는지 올바르게 판단되는지 확인

**Test Method**:
```javascript
const { isPhaseApplicable } = require('./lib/common.js');

console.log(isPhaseApplicable(4, 'Starter'));    // Expected: false (API는 Starter에 불필요)
console.log(isPhaseApplicable(4, 'Dynamic'));    // Expected: true
console.log(isPhaseApplicable(8, 'Dynamic'));    // Expected: false (Review는 optional)
console.log(isPhaseApplicable(8, 'Enterprise')); // Expected: true
```

**Expected Results**:
- [ ] Starter에서 Phase 4 → false
- [ ] Dynamic에서 Phase 4 → true
- [ ] Dynamic에서 Phase 8 → false (optional이므로 required에 없음)
- [ ] Enterprise에서 Phase 8 → true

---

#### TC-11-04: getLevelPhaseGuide 함수 테스트

**Objective**: Level별 Phase 가이드 메시지가 올바르게 생성되는지 확인

**Test Method**:
```javascript
const { getLevelPhaseGuide } = require('./lib/common.js');

console.log(getLevelPhaseGuide('Starter'));
// Expected output contains: "Phase 1: Schema → Phase 2: Convention → Phase 3: Mockup → Phase 6: UI Implementation → Phase 9: Deployment"
```

**Expected Results**:
- [ ] 각 Level에 맞는 Phase 순서 표시됨
- [ ] Skip되는 Phase 제외됨

---

### 3.12 FR-12: commands/backup/ 폴더 삭제

#### TC-12-01: 폴더 삭제 확인

**Objective**: `commands/backup/` 폴더가 삭제되었는지 확인

**Test Steps**:
```bash
ls -la commands/backup/ 2>/dev/null || echo "backup folder not found"
```

**Expected Results**:
- [ ] "backup folder not found" 출력됨
- [ ] `commands/backup/` 경로에 폴더 없음

---

## 4. Integration Tests

### 4.1 E2E: Complete PDCA Cycle with agents multi-binding

**Objective**: 전체 PDCA 사이클이 agents multi-binding과 함께 정상 동작하는지 확인

**Test Scenario**:
1. `/pdca plan e2e-test-feature` - Plan 문서 생성
2. `/pdca design e2e-test-feature` - Design 문서 생성
3. 간단한 코드 구현
4. `/pdca analyze e2e-test-feature` - gap-detector Agent 호출, Match Rate 확인
5. (matchRate < 90%) `/pdca iterate e2e-test-feature` - pdca-iterator Agent 호출
6. (matchRate >= 90%) `/pdca report e2e-test-feature` - report-generator Agent 호출

**Expected Results**:
- [ ] 각 단계에서 올바른 Agent 호출됨
- [ ] Task가 자동 생성되고 blockedBy 관계 설정됨
- [ ] Stop Hook에서 다음 단계 제안됨
- [ ] 최종 보고서 생성됨

---

### 4.2 E2E: Level-based Pipeline with Phase Skip

**Objective**: Starter Level에서 Phase Skip이 올바르게 동작하는지 확인

**Test Scenario**:
1. `/starter init starter-test` - Starter 프로젝트 초기화
2. Phase 1, 2, 3 순차 진행
3. Phase 3 완료 후 → Phase 6 자동 제안 확인 (4, 5 skip)
4. Phase 6 완료 후 → Phase 9 자동 제안 확인 (7, 8 skip)

**Expected Results**:
- [ ] Phase 3 → Phase 6 전환됨 (4, 5 skip)
- [ ] Phase 6 → Phase 9 전환됨 (7, 8 skip)
- [ ] Skip된 Phase에 대한 Task 생성 안됨

---

### 4.3 E2E: Enterprise skill with multi-agent binding

**Objective**: Enterprise skill에서 action별 다른 Agent가 호출되는지 확인

**Test Scenario**:
1. `/enterprise init ent-test` - enterprise-expert Agent 호출 확인
2. `/enterprise infra` - infra-architect Agent 호출 확인
3. `/enterprise architecture` - enterprise-expert Agent 호출 확인

**Expected Results**:
- [ ] init → enterprise-expert
- [ ] infra → infra-architect
- [ ] architecture → enterprise-expert

---

## 5. Platform-specific Tests

### 5.1 Claude Code 전용 테스트

#### TC-CC-01: AskUserQuestion 프롬프트 표시

**Objective**: Stop Hook에서 AskUserQuestion 프롬프트가 올바르게 표시되는지 확인

**Expected Results**:
- [ ] 버튼/옵션 형태로 표시됨
- [ ] 선택 시 해당 동작 실행됨

---

#### TC-CC-02: Task System 연동

**Objective**: Task 자동 생성 및 blockedBy 관계가 올바르게 동작하는지 확인

**Expected Results**:
- [ ] `/tasks` 명령으로 Task 목록 확인 가능
- [ ] blockedBy 관계가 Task에 반영됨
- [ ] Task 상태가 자동 업데이트됨

---

### 5.2 Gemini CLI 전용 테스트

#### TC-GEM-01: Plain Text 출력 확인

**Objective**: Gemini CLI에서 Stop Hook이 plain text로 올바르게 출력되는지 확인

**Expected Results**:
- [ ] JSON 대신 plain text 가이던스 출력됨
- [ ] 옵션이 번호 목록으로 표시됨

---

#### TC-GEM-02: extension.json hooks 동작

**Objective**: Gemini CLI에서 extension.json의 hooks가 올바르게 동작하는지 확인

**Expected Results**:
- [ ] SessionStart hook 실행됨
- [ ] BeforeTool, AfterTool hooks 실행됨

---

## 6. Regression Tests

### 6.1 기존 기능 유지 확인

| 기존 기능 | 테스트 방법 | Expected |
|----------|-----------|----------|
| 단일 agent: 필드 | `/starter` 실행 | starter-guide Agent 호출 |
| Hook 동작 | PreToolUse(Write) 트리거 | pre-write.js 실행 |
| PDCA 상태 관리 | `.pdca-status.json` 업데이트 | 정상 저장/로드 |
| Template imports | skill 실행 시 template 로드 | 템플릿 내용 포함 |

---

### 6.2 Backward Compatibility

| Test Case | Action | Expected |
|-----------|--------|----------|
| 기존 agent: 필드 | `/starter` (agent: starter-guide) | 정상 동작 |
| 기존 hooks | PreToolUse, PostToolUse | 정상 실행 |
| 기존 PDCA commands | `/pdca-status` → `/pdca status` | 동일 결과 |

---

## 7. Test Environment

### 7.1 Required Setup

```bash
# 1. bkit plugin 최신 버전 확인
cd ~/.claude/plugins/bkit-claude-code
git pull

# 2. Node.js 의존성 확인
node --version  # v18+ 권장

# 3. 테스트용 프로젝트 디렉토리 생성
mkdir ~/bkit-test && cd ~/bkit-test

# 4. Claude Code 시작
claude
```

### 7.2 Test Data

```bash
# 테스트용 feature 설정
mkdir -p docs/01-plan/features
mkdir -p docs/02-design/features
mkdir -p src/features/test-feature

# 기본 Plan 문서 생성
echo "# Test Feature Plan" > docs/01-plan/features/test-feature.plan.md

# 기본 Design 문서 생성
echo "# Test Feature Design" > docs/02-design/features/test-feature.design.md

# 기본 구현 코드 생성
echo "// Test implementation" > src/features/test-feature/index.ts
```

---

## 8. Test Execution Schedule

| Phase | Tests | Priority | Status |
|-------|-------|:--------:|:------:|
| 1 | FR-05 Unit Tests (skill-orchestrator.js) | HIGH | ⏳ |
| 2 | FR-01~04 Skills-Agents 연결 테스트 | HIGH | ⏳ |
| 3 | FR-06~07 Stop Hooks 자동화 테스트 | HIGH | ⏳ |
| 4 | FR-08~10 Templates 확인 | MEDIUM | ⏳ |
| 5 | FR-11 Level Phase Skip 테스트 | MEDIUM | ⏳ |
| 6 | E2E Integration Tests | HIGH | ⏳ |
| 7 | Platform-specific Tests | MEDIUM | ⏳ |
| 8 | Regression Tests | HIGH | ⏳ |

---

## 9. Success Criteria

### 9.1 Mandatory (필수)

- [ ] 모든 FR-01~12 테스트 케이스 통과
- [ ] Claude Code에서 agents multi-binding 정상 동작
- [ ] Stop Hooks 자동화 정상 동작
- [ ] 기존 기능 regression 없음

### 9.2 Optional (권장)

- [ ] Gemini CLI 호환성 검증
- [ ] E2E 전체 PDCA 사이클 통과
- [ ] 모든 Level (Starter/Dynamic/Enterprise) 테스트 통과

---

## 10. Risk Mitigation

| Risk | Mitigation |
|------|------------|
| agents 파싱 실패 | 단일 agent: 필드 fallback 확인 |
| Task 자동 생성 실패 | 수동 생성 안내 메시지 확인 |
| Hook 무한 루프 | maxIterations 체크 확인 |
| Gemini CLI 차이 | isGeminiCli() 분기 처리 확인 |

---

## Version History

| Version | Date | Changes | Author |
|---------|------|---------|--------|
| 0.1 | 2026-01-27 | Initial test plan draft | Claude Opus 4.5 |

