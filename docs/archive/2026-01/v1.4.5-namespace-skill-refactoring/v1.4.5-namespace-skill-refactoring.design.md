# v1.4.5 Namespace Skill Refactoring Design

> PDCA Design Document - 네임스페이스 Skill 호출 패턴 정리 상세 설계

## 1. 개요

### 1.1 관련 Plan
- [v1.4.5-namespace-skill-refactoring.plan.md](../../01-plan/features/v1.4.5-namespace-skill-refactoring.plan.md)

### 1.2 설계 목표
- 문서 내 네임스페이스 패턴의 일관성 확보
- 내부 구현 로직과 사용자 인터페이스의 명확한 구분
- 레거시 패턴에 대한 명시적 표시

---

## 2. 현황 분석 상세

### 2.1 파일별 발견 현황

```
┌─────────────────────────────────────────────────────────────────────┐
│ 파일                                          │ 패턴 수 │ 상태     │
├─────────────────────────────────────────────────────────────────────┤
│ docs/02-design/features/bkit-hub-command.design.md │ 25+   │ 정리필요 │
│ commands/menu.md                                    │ 1     │ 정리필요 │
│ docs/04-report/skills-autocomplete-research-*.md   │ 5+    │ 현행화  │
│ docs/archive/legacy/02-BKIT-PLUGIN-DESIGN.md       │ 16+   │ 레거시  │
│ docs/01-plan/features/v1.4.4-*.plan.md             │ 2     │ 히스토리│
└─────────────────────────────────────────────────────────────────────┘
```

### 2.2 패턴 분류

#### Type A: 사용자 인터페이스 (User-facing)
```
현재 권장: /pdca plan login, /bkit pdca plan login
레거시:    /bkit:pdca plan login  ← 제거 대상
```

#### Type B: 내부 라우팅 로직 (Internal)
```
설계 문서: Skill("bkit:pdca", "plan login")
→ 이것은 올바름 (내부 메커니즘 설명)
→ 단, "내부 구현" 표시 필요
```

#### Type C: 도움말 참조 (Help Reference)
```
현재: Use "/bkit:menu" to see available skills
수정: Use "/menu" to see available skills
```

---

## 3. 변경 설계

### 3.1 FR-01: bkit-hub-command.design.md 정리

#### 3.1.1 변경 위치 및 내용

**위치 1: 라인 163-184 (라우팅 로직 섹션)**

Before:
```markdown
→ Skill tool로 "bkit:pdca" 호출
```

After:
```markdown
→ Skill tool로 "bkit:pdca" 호출 (내부 라우팅 - 사용자에게 노출되지 않음)
```

**위치 2: 라인 467-503 (Skill 호출 예제)**

Before:
```markdown
| `/bkit:menu pdca plan login` | `Skill("bkit:pdca", "plan login")` |
```

After:
```markdown
| `/bkit pdca plan login` | `Skill("bkit:pdca", "plan login")` |
```
+ 섹션 상단에 주석 추가:
```markdown
> **Note**: `Skill("bkit:*")` 형식은 내부 라우팅 구현입니다.
> 사용자는 `/bkit pdca plan` 또는 `/pdca plan` 형식을 사용합니다.
```

**위치 3: 라인 531-533 (테스트 시나리오)**

Before:
```markdown
- bkit:pdca skill 호출
```

After:
```markdown
- pdca skill 호출 (내부적으로 bkit:pdca 라우팅)
```

#### 3.1.2 변경 파일 diff 예상

```diff
--- a/docs/02-design/features/bkit-hub-command.design.md
+++ b/docs/02-design/features/bkit-hub-command.design.md
@@ -160,7 +160,9 @@
 ## 라우팅 로직

+> **Internal Implementation Note**: 아래 `Skill("bkit:*")` 호출은 내부 라우팅 메커니즘입니다.
+> 사용자 인터페이스: `/bkit <category> <action>` 또는 `/pdca`, `/starter` 등 직접 호출
+
 | 사용자 입력 | 내부 라우팅 |
-| `/bkit:menu pdca plan login` | `Skill("bkit:pdca", "plan login")` |
+| `/bkit pdca plan login` | `Skill("bkit:pdca", "plan login")` |
```

---

### 3.2 FR-02: menu.md 정리

#### 3.2.1 변경 위치

**파일**: `/commands/menu.md`
**라인**: 7

Before:
```markdown
Use "/bkit:menu" to see available skills list.
```

After:
```markdown
Use "/menu" to see available bkit skills list.
```

#### 3.2.2 추가 검토 사항

menu.md 전체에서 `/bkit:menu` 참조 확인:
- 라인 7: 설명문 → 수정
- 기타: 없음 (확인 완료)

---

### 3.3 FR-03: skills-autocomplete-research 보고서 업데이트

#### 3.3.1 변경 위치

**파일**: `/docs/04-report/skills-autocomplete-research-2026-01.md`

**섹션**: 해결책 제안 부분

Before:
```markdown
### 해결책 B - 네임스페이스 안내
- /bkit:pdca
- /bkit:starter
```

After:
```markdown
### 해결책 B - 네임스페이스 안내 (채택되지 않음)
~~- /bkit:pdca~~
~~- /bkit:starter~~

> **v1.4.5 Update**: 네임스페이스 형식 대신 `/bkit` hub command 채택.
> 사용자는 `/bkit pdca plan` 또는 직접 `/pdca plan` 형식 사용.
```

---

### 3.4 FR-04: 레거시 문서 배너 추가

#### 3.4.1 대상 파일

**파일**: `/docs/archive/legacy/02-BKIT-PLUGIN-DESIGN.md`

#### 3.4.2 추가할 배너

파일 최상단에 추가:
```markdown
---
⚠️ **LEGACY DOCUMENT - v1.4.2**

이 문서는 bkit 플러그인 v1.4.2 설계 문서입니다.
현재 아키텍처(v1.4.4+)와 다른 점:
- `/bkit:command` → `/bkit command` 또는 직접 `/command`
- 네임스페이스 필수 → 선택적 (직접 호출 권장)

현재 설계: [bkit-hub-command.design.md](../../02-design/features/bkit-hub-command.design.md)

---
```

---

## 4. 변경하지 않는 항목

### 4.1 아카이브 히스토리 문서
```
docs/01-plan/features/v1.4.4-documentation-sync.plan.md
→ 라인 129, 179의 /bkit:pdca-plan 참조
→ 이유: 마이그레이션 히스토리 기록으로 보존
```

### 4.2 내부 Skill 라우팅 로직
```
Skill("bkit:pdca", "args") 형태
→ 이유: 실제 내부 구현이므로 유지
→ 단, 문서에서 "내부 구현"임을 명시
```

---

## 5. 구현 체크리스트

### 5.1 필수 (Must Have)

- [ ] **FR-01** bkit-hub-command.design.md
  - [ ] 라인 160 부근: 내부 구현 Note 추가
  - [ ] 라인 467-503: `/bkit:menu` → `/bkit` 수정
  - [ ] 라인 531-533: 테스트 시나리오 표현 수정

- [ ] **FR-02** menu.md
  - [ ] 라인 7: `/bkit:menu` → `/menu` 수정

### 5.2 권장 (Should Have)

- [ ] **FR-03** skills-autocomplete-research-2026-01.md
  - [ ] 해결책 B 섹션에 "채택되지 않음" 표시
  - [ ] v1.4.5 업데이트 노트 추가

- [ ] **FR-04** 02-BKIT-PLUGIN-DESIGN.md (archive/legacy)
  - [ ] 파일 최상단 레거시 배너 추가

### 5.3 선택 (Nice to Have)

- [ ] **FR-05** 문서 표기법 가이드라인
  - [ ] 필요시 docs/DOCUMENTATION-STYLE.md 작성

---

## 6. 검증 방법

### 6.1 자동 검증

```bash
# 현재 문서에서 레거시 패턴 검색 (archive 제외)
grep -r "/bkit:" --include="*.md" docs/ | grep -v "archive" | grep -v "Skill("

# 예상 결과: 0건 (또는 명시적 "레거시" 표시된 항목만)
```

### 6.2 수동 검증

| 검증 항목 | 방법 | 예상 결과 |
|----------|------|----------|
| menu.md 정상 동작 | `/menu` 실행 | 도움말 표시 |
| 설계 문서 일관성 | bkit-hub-command 검토 | 내부/외부 구분 명확 |
| 레거시 표시 | archive 문서 확인 | 배너 표시됨 |

---

## 7. 영향 분석

### 7.1 영향 받는 파일

| 파일 | 변경 유형 | 영향도 |
|------|----------|--------|
| docs/02-design/features/bkit-hub-command.design.md | 주석/표기 수정 | 낮음 |
| commands/menu.md | 텍스트 수정 | 낮음 |
| docs/04-report/skills-autocomplete-research-*.md | 현행화 | 낮음 |
| docs/archive/legacy/02-BKIT-PLUGIN-DESIGN.md | 배너 추가 | 없음 |

### 7.2 영향 받지 않는 항목

- 실제 skill/agent 동작
- hook 스크립트
- 라이브러리 코드
- 사용자 워크플로우

---

## 8. 롤백 계획

문서 변경만 수행하므로 git revert로 즉시 롤백 가능:

```bash
git revert <commit-hash>
```

---

## 9. 타임라인

| 단계 | 예상 소요 |
|------|----------|
| FR-01 (설계 문서) | 3분 |
| FR-02 (menu.md) | 1분 |
| FR-03 (보고서) | 2분 |
| FR-04 (레거시 배너) | 1분 |
| 검증 | 2분 |
| **총 소요** | **~10분** |

---

**작성일**: 2026-01-27
**작성자**: Claude (PDCA Design)
**버전**: v1.0.0
**관련 Plan**: v1.4.5-namespace-skill-refactoring.plan.md
