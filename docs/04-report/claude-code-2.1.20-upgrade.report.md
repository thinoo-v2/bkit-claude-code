# Claude Code 2.1.20 업그레이드 보고서

> **Report Date**: 2026-01-27
> **Version**: Claude Code v2.1.14 → v2.1.20
> **Report Type**: PDCA Completion Report
> **Author**: AI Assistant (Claude Opus 4.5)

---

## 1. Executive Summary

Claude Code 2.1.20이 2026년 1월 27일 릴리스되었습니다. 이 버전은 2.1.14 이후 7개의 마이너 업데이트를 포함하며, **Task 관리 시스템**, **키보드 단축키 커스터마이징**, **PR 리뷰 상태 표시** 등 주요 기능이 추가되었습니다. bkit 플러그인과의 호환성 분석 결과, **대부분의 기능이 호환**되나 일부 주의가 필요한 이슈가 확인되었습니다.

### 핵심 변경사항 요약

| 버전 | 릴리스 일자 | 주요 변경 |
|------|------------|----------|
| 2.1.20 | 2026-01-27 | PR 리뷰 상태, Task 삭제, CLAUDE.md 추가 디렉토리, 세션 압축 수정 |
| 2.1.19 | 2026-01-23 | CLAUDE_CODE_ENABLE_TASKS, 커스텀 커맨드 인덱스 인수, VSCode 세션 포크 |
| 2.1.18 | 2026-01-22 | 커스터마이즈 가능한 키보드 단축키 (/keybindings) |
| 2.1.17 | 2026-01-22 | AVX 미지원 프로세서 크래시 수정 |
| 2.1.16 | 2026-01-22 | **새로운 Task 관리 시스템**, 네이티브 플러그인 관리, OAuth 원격 세션 |
| 2.1.15 | 2026-01-21 | npm 설치 폐기 알림, React Compiler 성능 개선 |
| 2.1.14 | 2026-01-20 | Bash 모드 히스토리 자동완성, 플러그인 검색, Git SHA 고정 |

---

## 2. 상세 변경사항 분석

### 2.1 v2.1.20 (2026-01-27) - 최신 버전

#### 추가된 기능 (Added)

| 기능 | 설명 | bkit 영향도 |
|------|------|-------------|
| **PR 리뷰 상태 표시** | 프롬프트 푸터에 PR 상태 표시 (승인됨, 변경 요청, 대기중, 초안) | ⚪ 없음 |
| **Task 삭제 기능** | `TaskUpdate` 도구로 태스크 삭제 가능 | 🟢 **긍정적** - bkit Task 워크플로우 개선 |
| **CLAUDE.md 추가 디렉토리** | `--add-dir` 플래그로 추가 디렉토리의 CLAUDE.md 로드 | ⚪ 없음 |
| **Vim 노멀 모드 화살표 키** | 커서 이동 불가 시 히스토리 탐색 | ⚪ 없음 |
| **외부 에디터 단축키 (Ctrl+G)** | 도움말 메뉴에 추가 | ⚪ 없음 |
| **설정 백업 타임스탬프화** | 최근 5개 백업 유지 | ⚪ 없음 |
| **Background 에이전트 권한 요청** | 실행 전 도구 권한 확인 | 🟡 **주의** - bkit 에이전트 워크플로우 확인 필요 |
| **/copy 명령어 전체 사용자 공개** | 이전에는 제한된 사용자만 가능 | ⚪ 없음 |
| **/commit-push-pr Slack 통합** | MCP 도구로 PR URL을 Slack에 자동 게시 | ⚪ 없음 |

#### 수정된 버그 (Fixed)

| 버그 | 설명 | bkit 영향도 |
|------|------|-------------|
| **세션 압축 이슈** | resume 시 전체 히스토리 로드 대신 압축 요약 사용 | 🟢 **긍정적** - 세션 복원 안정성 개선 |
| **에이전트 사용자 메시지 무시** | 작업 중 전송된 메시지 처리 개선 | 🟢 **긍정적** - bkit 에이전트 응답성 개선 |
| **와이드 문자(이모지, CJK) 렌더링** | 좁은 문자로 대체 시 후행 열 정리 | 🟢 **긍정적** - 한글 사용 안정성 |
| **MCP 도구 JSON 파싱 오류** | 특수 유니코드 문자 처리 | 🟢 **긍정적** - MCP 안정성 개선 |
| **도구 사용 취소 시 크래시** | 취소 처리 안정화 | 🟢 **긍정적** |
| **멀티라인 입력 화살표 키** | 커서 이동 우선순위 조정 | ⚪ 없음 |
| **슬래시 명령어 고스트 텍스트** | 입력 중 깜빡임 수정 | ⚪ 없음 |
| **마켓플레이스 소스 삭제** | 설정 완전 삭제 처리 | ⚪ 없음 |
| **/context 중복 출력** | 출력 정리 | ⚪ 없음 |
| **Task 리스트 표시 위치** | 대화 뷰 내 올바른 위치로 수정 | 🟢 **긍정적** |
| **Python docstring diff 하이라이팅** | 멀티라인 구문 내 diff 처리 | ⚪ 없음 |

#### 변경된 동작 (Changed)

| 변경 | 설명 | bkit 영향도 |
|------|------|-------------|
| **읽기/검색 그룹 텐스 변경** | 진행 중: "Reading", 완료: "Read" | ⚪ 없음 |
| **팀메이트 메시지 Markdown 렌더링** | 플레인 텍스트 → 리치 마크다운 | ⚪ 없음 |
| **ToolSearch 결과 알림화** | 인라인 대신 간단한 알림으로 표시 | ⚪ 없음 |
| **Bash(*) 권한 규칙** | `Bash`와 동등하게 처리 | 🟢 **긍정적** - 권한 설정 간소화 |

---

### 2.2 v2.1.19 (2026-01-23)

#### 추가된 기능

| 기능 | 설명 | bkit 영향도 |
|------|------|-------------|
| **CLAUDE_CODE_ENABLE_TASKS 환경변수** | `false` 설정으로 기존 시스템 임시 유지 | 🟡 **주의** - Task 시스템 마이그레이션 옵션 |
| **커스텀 명령어 인수 단축표기** | `$0`, `$1` 등으로 개별 인수 접근 | 🟢 **긍정적** - bkit 스킬 인수 처리 개선 |
| **[VSCode] 세션 포크 및 리와인드** | 모든 사용자에게 공개 | ⚪ 없음 |
| **[SDK] queued_command 리플레이** | `SDKUserMessageReplay` 이벤트 | ⚪ 없음 |

#### 수정된 버그

| 버그 | 설명 | bkit 영향도 |
|------|------|-------------|
| **AVX 미지원 프로세서 크래시** | 호환성 개선 | ⚪ 없음 |
| **터미널 종료 시 좀비 프로세스** | EIO 에러 처리, SIGKILL 폴백 | 🟢 **긍정적** - 프로세스 정리 개선 |
| **/rename, /tag 세션 업데이트** | git worktree 등 다른 디렉토리에서 실행 시 수정 | ⚪ 없음 |
| **커스텀 타이틀 세션 재개** | 다른 디렉토리에서 실행 시 수정 | ⚪ 없음 |
| **프롬프트 스태시 텍스트 손실** | Ctrl+S 후 복원 시 붙여넣기 텍스트 유지 | ⚪ 없음 |
| **에이전트 목록 모델 표시** | "Sonnet (default)" → "Inherit (default)" | 🟢 **긍정적** - 정확한 모델 표시 |
| **백그라운드 훅 명령어 대기** | 의도적 백그라운드 프로세스 조기 반환 | 🔴 **중요** - bkit hooks 동작 영향 가능 |
| **파일 쓰기 미리보기 빈 줄** | 빈 줄 표시 수정 | ⚪ 없음 |

#### 변경된 동작

| 변경 | 설명 | bkit 영향도 |
|------|------|-------------|
| **스킬 승인 없이 허용** | 추가 권한/훅 없는 스킬은 승인 불필요 | 🟢 **긍정적** - bkit 스킬 사용성 개선 |
| **인덱스 인수 문법 변경** | `$ARGUMENTS.0` → `$ARGUMENTS[0]` | 🔴 **중요** - bkit 커맨드 인수 문법 확인 필요 |

---

### 2.3 v2.1.18 (2026-01-22)

#### 추가된 기능

| 기능 | 설명 | bkit 영향도 |
|------|------|-------------|
| **커스터마이즈 가능한 키보드 단축키** | 컨텍스트별 키바인딩, 코드 시퀀스, `/keybindings` 명령어 | ⚪ 없음 |

---

### 2.4 v2.1.17 (2026-01-22)

#### 수정된 버그

| 버그 | 설명 | bkit 영향도 |
|------|------|-------------|
| **AVX 미지원 프로세서 크래시** | 호환성 긴급 수정 | ⚪ 없음 |

---

### 2.5 v2.1.16 (2026-01-22)

#### 추가된 기능

| 기능 | 설명 | bkit 영향도 |
|------|------|-------------|
| **새로운 Task 관리 시스템** | 의존성 추적 등 강화된 기능 | 🟢 **매우 긍정적** - bkit PDCA 워크플로우 강화 |
| **[VSCode] 네이티브 플러그인 관리** | 플러그인 설치/관리 개선 | ⚪ 없음 |
| **[VSCode] OAuth 원격 세션 브라우징** | 세션 대화상자에서 원격 세션 확인/재개 | ⚪ 없음 |

#### 수정된 버그

| 버그 | 설명 | bkit 영향도 |
|------|------|-------------|
| **서브에이전트 사용 시 OOM 크래시** | 메모리 관리 개선 | 🟢 **긍정적** - bkit 에이전트 안정성 |
| **"Context remaining" 경고** | /compact 후 숨김 처리 | ⚪ 없음 |
| **세션 타이틀 언어 설정** | 사용자 언어 설정 존중 | 🟢 **긍정적** - 한국어 지원 |
| **[IDE] Windows 사이드바 레이스 컨디션** | 시작 시 컨테이너 표시 | ⚪ 없음 |

---

### 2.6 v2.1.15 (2026-01-21)

#### 추가된 기능

| 기능 | 설명 | bkit 영향도 |
|------|------|-------------|
| **npm 설치 폐기 알림** | `claude install` 또는 네이티브 설치 권장 | 🟡 **주의** - 설치 방법 업데이트 필요 |
| **React Compiler** | UI 렌더링 성능 개선 | ⚪ 없음 |

#### 수정된 버그

| 버그 | 설명 | bkit 영향도 |
|------|------|-------------|
| **"Context left" 경고** | /compact 후 사라지지 않는 문제 수정 | ⚪ 없음 |
| **MCP stdio 서버 타임아웃** | 자식 프로세스 미종료 시 UI 프리즈 | 🟢 **긍정적** - MCP 안정성 |

---

### 2.7 v2.1.14 (2026-01-20)

#### 추가된 기능

| 기능 | 설명 | bkit 영향도 |
|------|------|-------------|
| **Bash 모드 히스토리 자동완성** | `!` 모드에서 Tab으로 명령어 완성 | ⚪ 없음 |
| **설치된 플러그인 검색** | 이름/설명으로 필터링 | 🟢 **긍정적** - bkit 검색 가능 |
| **플러그인 Git SHA 고정** | 특정 커밋에 고정 가능 | 🟢 **긍정적** - 버전 고정 가능 |
| **[VSCode] /usage 명령어** | 현재 플랜 사용량 표시 | ⚪ 없음 |

#### 수정된 버그

| 버그 | 설명 | bkit 영향도 |
|------|------|-------------|
| **컨텍스트 윈도우 차단 한계** | ~65% → ~98%로 수정 | 🟢 **긍정적** - 더 많은 컨텍스트 사용 |
| **병렬 서브에이전트 메모리 문제** | 크래시 수정 | 🟢 **긍정적** - bkit 에이전트 안정성 |
| **장기 실행 세션 메모리 누수** | 쉘 명령 완료 후 스트림 리소스 정리 | 🟢 **긍정적** |
| **@ 심볼 파일 자동완성** | Bash 모드에서 잘못된 트리거 수정 | ⚪ 없음 |
| **슬래시 명령어 자동완성** | 유사 명령어 선택 오류 수정 (/context vs /compact) | 🟢 **긍정적** - bkit 스킬 선택 정확도 |
| **플러그인 마켓플레이스 뒤로가기** | 단일 마켓플레이스 구성 시 일관성 | ⚪ 없음 |
| **iTerm2 진행 표시줄** | 종료 시 정리 | ⚪ 없음 |

#### 개선 사항

| 개선 | 설명 | bkit 영향도 |
|------|------|-------------|
| **Backspace 붙여넣기 삭제** | 단일 토큰으로 삭제 | ⚪ 없음 |

---

## 3. 알려진 이슈 (Known Issues)

### 3.1 v2.1.20 관련 이슈

| 이슈 번호 | 제목 | 상태 | bkit 영향도 |
|-----------|------|------|-------------|
| **#21241** | Hook 에러 메시지가 v2.1.20 이후 표시되지 않음 | OPEN | 🔴 **높음** |
| #21232 | /context 명령어 색상 손실 | OPEN | ⚪ 없음 |

### 3.2 2.1.x 시리즈 공통 이슈

| 이슈 번호 | 제목 | 상태 | bkit 영향도 |
|-----------|------|------|-------------|
| **#20959** | 플러그인 skills/ 디렉토리가 / 메뉴에서 발견되지 않음 | OPEN | 🔴 **높음** |
| **#16954** | Hook 명령어 dedup이 env 확장을 무시함 | OPEN | 🟡 **중간** |
| **#18346** | 에이전트 모델 정의를 존중하지 않음 | OPEN | 🟡 **중간** |
| #21220 | 메모리 누수 (8-12GB RAM vs 2.0.36의 245MB) | OPEN | 🟡 **중간** |
| #17116 | 코드 품질 회귀: 2.1.x에서 지시 준수 감소 | OPEN | 🟡 **중간** |
| #17986 | @ 에이전트 호출이 2.1.x에서 작동하지 않음 | OPEN | ⚪ 없음 |
| #17089 | 로컬 플러그인이 2.1.x 이후 지속되지 않음 | OPEN | 🟡 **중간** |

---

## 4. bkit 호환성 분석

### 4.1 현재 bkit 구성요소

| 구성요소 | 수량 | 상태 |
|----------|------|------|
| Hooks | 6개 (SessionStart, PreToolUse×2, PostToolUse×3, Stop, UserPromptSubmit, PreCompact) | ✅ 호환 |
| Skills | 22개 | 🟡 확인 필요 |
| Agents | 11개 | ✅ 호환 |
| Scripts | 다수 | ✅ 호환 |

### 4.2 호환성 매트릭스

| bkit 기능 | 영향받는 변경사항 | 호환성 | 권장 조치 |
|-----------|------------------|--------|----------|
| **SessionStart Hook** | 없음 | ✅ 완전 호환 | - |
| **PreToolUse Hooks** | #21241 에러 표시 이슈 | 🟡 부분 호환 | 에러 로깅 강화 고려 |
| **PostToolUse Hooks** | #21241 에러 표시 이슈 | 🟡 부분 호환 | 에러 로깅 강화 고려 |
| **Stop Hook** | #16954 dedup 이슈 | ✅ 호환 (단일 플러그인) | 모니터링 |
| **UserPromptSubmit** | 없음 | ✅ 완전 호환 | - |
| **Skills (22개)** | #20959 검색 불가 이슈 | 🟡 부분 호환 | commands/ 미러링 고려 |
| **Agents (11개)** | #18346 모델 정의 이슈 | 🟡 부분 호환 | 모델 설정 확인 |
| **Task 시스템** | v2.1.16 새 시스템, v2.1.20 삭제 기능 | ✅ **향상됨** | 새 기능 활용 |
| **커스텀 명령어** | v2.1.19 인수 문법 변경 | 🟡 확인 필요 | `$ARGUMENTS[0]` 문법 확인 |

### 4.3 주요 위험 요소

#### 🔴 높은 위험

1. **Hook 에러 메시지 미표시 (#21241)**
   - **영향**: bkit hooks의 에러/차단 이유를 사용자가 알 수 없음
   - **임시 조치**: 디버그 로그 활성화로 문제 추적
   - **예상 수정**: Anthropic에서 핫픽스 예정

2. **Skills 검색 불가 (#20959)**
   - **영향**: bkit의 22개 skills가 `/` 메뉴에서 발견되지 않을 수 있음
   - **임시 조치**: `commands/` 디렉토리에 래퍼 추가 고려
   - **확인 필요**: bkit skills 실제 검색 가능 여부 테스트

#### 🟡 중간 위험

3. **Hook Dedup 이슈 (#16954)**
   - **영향**: 다른 플러그인과 동일한 훅 명령어 사용 시 충돌
   - **현재 상태**: bkit은 단일 플러그인으로 사용되므로 영향 낮음
   - **권장 조치**: 고유한 명령어 경로 유지

4. **에이전트 모델 정의 (#18346)**
   - **영향**: bkit 에이전트의 모델 설정이 무시될 수 있음
   - **확인 필요**: 각 에이전트의 모델 설정 테스트

---

## 5. 권장 조치 사항

### 5.1 즉시 조치 (Critical)

| 우선순위 | 조치 | 담당 | 상태 |
|----------|------|------|------|
| P0 | Hook 에러 표시 이슈 (#21241) 모니터링 | 개발팀 | ⏳ 대기 |
| P0 | Skills 검색 테스트 수행 | 개발팀 | 📋 예정 |

### 5.2 단기 조치 (1-2주)

| 우선순위 | 조치 | 담당 | 상태 |
|----------|------|------|------|
| P1 | `$ARGUMENTS[0]` 문법 마이그레이션 확인 | 개발팀 | 📋 예정 |
| P1 | 에이전트 모델 설정 검증 | 개발팀 | 📋 예정 |
| P2 | Task 삭제 기능 bkit 워크플로우 통합 | 개발팀 | 📋 예정 |

### 5.3 중기 조치 (1개월)

| 우선순위 | 조치 | 담당 | 상태 |
|----------|------|------|------|
| P2 | Skills/Commands 미러링 구조 검토 | 설계팀 | 📋 예정 |
| P3 | 새 키보드 단축키 시스템 활용 검토 | 설계팀 | 📋 예정 |

---

## 6. 긍정적 변화 활용 계획

### 6.1 새로운 Task 시스템 (v2.1.16)

```
★ Insight ─────────────────────────────────────
• Task 의존성 추적으로 PDCA 워크플로우 강화 가능
• TaskUpdate로 태스크 삭제 지원 (v2.1.20)
• CLAUDE_CODE_ENABLE_TASKS=false로 기존 시스템 폴백 가능
─────────────────────────────────────────────────
```

### 6.2 성능 및 안정성 개선

- **메모리 관리**: 병렬 서브에이전트 메모리 문제 수정
- **컨텍스트 윈도우**: 차단 한계 ~65% → ~98%로 확장
- **세션 압축**: resume 시 안정성 개선
- **React Compiler**: UI 렌더링 성능 향상

### 6.3 사용자 경험 개선

- **PR 리뷰 상태**: GitHub 워크플로우 가시성 향상
- **한글/CJK 렌더링**: 와이드 문자 표시 안정화
- **슬래시 명령어**: 자동완성 정확도 향상

---

## 7. 테스트 체크리스트

### 7.1 핵심 기능 테스트

- [ ] SessionStart hook 정상 실행
- [ ] PreToolUse hooks (Write, Edit, Bash) 정상 작동
- [ ] PostToolUse hooks 정상 작동
- [ ] Stop hook 정상 실행
- [ ] UserPromptSubmit hook 정상 실행
- [ ] PreCompact hook 정상 실행

### 7.2 Skills 테스트

- [ ] `/pdca` 시리즈 명령어 검색 가능
- [ ] `/starter`, `/dynamic`, `/enterprise` 검색 가능
- [ ] `/development-pipeline` 검색 가능
- [ ] `/phase-1-schema` ~ `/phase-9-deployment` 검색 가능

### 7.3 Agents 테스트

- [ ] gap-detector 에이전트 정상 작동
- [ ] pdca-iterator 에이전트 정상 작동
- [ ] code-analyzer 에이전트 정상 작동
- [ ] report-generator 에이전트 정상 작동

### 7.4 새 기능 테스트

- [ ] Task 삭제 기능 (TaskUpdate status: "deleted")
- [ ] `$ARGUMENTS[0]` 인수 문법
- [ ] 세션 압축/복원 안정성

---

## 8. 참고 자료

### 공식 문서

- [Claude Code CHANGELOG](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [Claude Code Releases](https://github.com/anthropics/claude-code/releases)
- [Claude Code Documentation](https://code.claude.com/docs/en/overview)

### 관련 이슈

- [#21241 - Hook error messages not displayed](https://github.com/anthropics/claude-code/issues/21241)
- [#20959 - Plugin skills not discovered](https://github.com/anthropics/claude-code/issues/20959)
- [#16954 - Hook command dedup](https://github.com/anthropics/claude-code/issues/16954)
- [#18346 - Agent model definition](https://github.com/anthropics/claude-code/issues/18346)

### bkit 내부 문서

- [hooks/hooks.json](/hooks/hooks.json) - bkit 훅 구성
- [skills/](/skills/) - bkit 스킬 디렉토리 (22개)
- [agents/](/agents/) - bkit 에이전트 디렉토리 (11개)

---

## 9. 결론

Claude Code 2.1.20은 **Task 관리 시스템 강화**, **성능 개선**, **안정성 향상** 등 많은 긍정적인 변화를 가져왔습니다. bkit 플러그인은 대부분의 기능이 호환되나, **Hook 에러 표시 (#21241)**와 **Skills 검색 (#20959)** 이슈에 대한 모니터링이 필요합니다.

### 종합 평가

| 항목 | 평가 |
|------|------|
| **전반적 호환성** | 🟢 양호 (85%) |
| **핵심 기능 영향** | 🟡 일부 주의 필요 |
| **업그레이드 권장** | ✅ 권장 (주의사항 확인 후) |
| **긴급 조치 필요** | ❌ 없음 |

---

> **Report Generated**: 2026-01-27T23:50:00+09:00
> **Next Review**: v2.1.21 릴리스 후 또는 주요 이슈 해결 시
